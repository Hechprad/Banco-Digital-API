swagger: "2.0"
info:
  description: "Banco Digital API com cadastro de contas, clientes, favorecidos, consultas de strato, saldo"
  version: "1.0.0"
  title: "Banco Digital API"
  termsOfService: "http://swagger.io/terms/"
  contact:
    email: "hecherat@gmail.com"
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"
host: "localhost:8080"
basePath: "/banco-digital-api/v2"
tags:
- name: "contas"
  description: "Tudo sobre contas"
- name: "favorecidos"
  description: "Tudo sobre favorecidos"
- name: "transferencias"
  description: "Tudo sobre Transferencias"
schemes:
- "https"
produces: 
  - application/json
consumes: 
  - application/json
paths:
  /contas:
    post:
      tags:
        - contas
      summary: "Cadastra uma Conta"
      description: "Cadastra uma nova Conta"
      operationId: "createAccount"
      parameters:
      - in: body
        name: "request"
        required: true
        schema:
          properties:
            agencia:
              type: integer
            correntista: 
              $ref: '#/definitions/Correntista'
      responses:
        201:
          description: "Conta-corrente criada com sucesso"
          schema:
            properties:
              agencia:
                type: number
                format: int32
              contaCorrente:
                type: number
                format: int32
        400: # requisição inválida
          description: "Parâmetros inválidos informados pelo cliente"
          schema:
            $ref: '#/definitions/ResponseError'
        500:
          description: "Erro não mapeado"
          schema:
            $ref: '#/definitions/ResponseError'
  /contas/{agencia}/{conta-corrente}:
    get:
      summary:  "Consulta de informações gerais da conta-corrente" 
      operationId: "getAccountDetails"
      parameters:
      - $ref: '#/parameters/Agencia'
      - $ref: '#/parameters/Conta'
      responses:
        200:
          description: "Sucesso"
          schema:
            properties:
              saldo:
                type: number
                format: float32
    
        
  /health:
    get:
      summary: "Rota de healthcheck da aplicacao"
      operationId: "health"
      responses:
        200:
          description: "API funcionando"
          schema:
            properties:
               version:
                 type: string
               environment:
                 type: string
definitions:
  Correntista:
    type: object
    properties:
      nome:
        type: string
      sobrenome:
        type: string
    
  ResponseError:
    type: object
    properties:
      code:
        type: integer
        format: int32
      type:
        type: string
      messages:
        type: array
        items:
          type: string
      cause:
        required: false
        type: object
        properties:
          
  
  ResponseMeta:
    type: object
    properties:
      version:
        type: string
      timestamp:
        type: string
        format: date-time
      hostname:
        type: string
      numberOfRecords:
        type: integer
        format: int32
parameters:
  Agencia:
    in: path
    name: agencia
    type: number
    format: int32
    
  Conta:
    in: path
    name: conta-corrente
    type: number
    format: int32
    
  Page:
    in: query
    name: page
    type: number
    format: int32
    default: 1
  
  Size:
    in: query
    name: size
    type: number
    format: int32
    default: 20
  
  
  
